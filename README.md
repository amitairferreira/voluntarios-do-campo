##

<br>

<div align="center">
<img src="https://user-images.githubusercontent.com/100969789/180617783-179be0e9-db51-450e-9aeb-e667bb9e9c0a.png" width="350px" />
</div>


> Iniciativa que visa conectar produtores da agricultura familiar e profissionais volunt√°rios.



<p align="justify">
  <a>
     <img src="http://img.shields.io/static/v1?label=status&message=Em%20Desenvolvimento&color=pink&style?style=flat"/>
     <img src="https://img.shields.io/github/last-commit/amitairferreira/voluntarios-do-campo?color=pink"/>
     <img src="https://img.shields.io/badge/version-1.0.0-pink"/>
  </a>
</p>

---

## **Sum√°rio**

* [Desafio](#desafio)
* [Proposta](#proposta)
* [Aprendizados](#aprendizados)
* [Link Apresenta√ß√£o](#link)
* [Funcionalidades](#funcionalidades)
* [Tecnologias Utilizadas](#tecnologias)
* [Bibliotecas Aplicadas](#bibliotecas)
* [Arquitetura MVC](#arquitetura)
* [Instru√ß√µes](#instru√ß√µes)
* [Portas](#portas)
* [Rotas](#rotas)
* [Rotas Privadas](#rotasp)
* [Dados para as collections](#dados)
* [API](#api)
* [Implementa√ß√µes Futuras](#implementa√ß√µes)
* [Agradecimentos](#agradecimentos)
* [Sobre a autora](#autora)

---

<div id='desafio'/>

## üíª Desafio

<p align="justify">Segundo dados do MAPA(minist√©rio da agricultura pecu√°ria e abastecimento) a agricultura Familiar √© a principal respons√°vel pela produ√ß√£o dos alimentos que s√£o disponibilizados para o consumo da popula√ß√£o brasileira. Toda essa produ√ß√£o √© oriunda de pequenos sistemas agr√≠colas constitu√≠dos de produtores rurais, comunidades tradicionais, assentados da reforma agr√°ria, silvicultores e aquicultores.
<p align="justify">O censo Agr√≠cola do IBGE indica que a agricultura familiar √© a base econ√¥mica de 90% dos munic√≠pios brasileiros com at√© 20 mil habitantes, com uma produ√ß√£o diversificada de gr√£os, prote√≠nas animal e vegetal, frutas, verduras e legumes. 
<p align="justify">Embora evidente a import√¢ncia da agricultura familiar para o pais, a falta de assist√™ncia t√©cnica se mostra como agente contradit√≥rio para o desenvolvimento no campo, visto que o acompanhamento profissional paralelo a experi√™ncia cotidiana do produtor tornaria poss√≠vel a cria√ß√£o de sistema agr√≠colas sustent√°veis e lucrativos.
<p align="justify">Contudo, os org√£os p√∫blicos respons√°veis por oferecer assist√™ncia t√©cnica agr√≠cola n√£o atende de forma eficaz a essa popula√ß√£o e a pricipal justificativa apontada √© o reduzido tamanho do corpo t√©cnico dessas institui√ß√µes, o que impossibilita orienta√ß√£o individualizada aos agricultores.
<br>

---
  
<div id='proposta'/>

## üí° Proposta  

<p align="justify">O projeto √© uma API que permite a listagem de pequenos produtores da agricultura familiar, bem como listagem de profissionais da agropecu√°ria como agr√¥nomos, zootecnistas, veterin√°rios e t√©cnicos agr√≠colas. O cadastro √© realizado de forma clara e intuitiva, permitindo que pessoas de qualquer grau de escolaridade tenha acesso de forma simples.
<p align="justify">Ao realizar o cadastro, o produtor e profissional informam dados como endere√ßo, principais atividades desenvolvidas e √°reas de atua√ß√£o. O produtor poder√° pesquisar o t√©cnico por profiss√£o e cidade, ser√° poss√≠vel ainda, troca de mensagens entre ambos, possibilitando contato direto e dessa forma reduzindo a dist√¢ncia entre agricultura familiar e todo o acompanhamento t√©cnico nescess√°rio.

---

<div id='aprendizados'/>
  
## üìö Aprendizados

<p align="justify">Volunt√°rios do campo √© fruto do bootcamp toda em tech {Reprograma}, cujo projeto de conclus√£o √© uma API Rest fundamentada no m√©todo CRUD, que s√£o: Create (criar), Read (leitura), Update (atualizar), Delete (deletar). A API est√° conectada ao banco de dados NoSQL mongoDB e documentada no presente reposit√≥rio.

---

<div id='link'/>

## üìù Link Apresenta√ß√£o

- [Apresenta√ß√£o]()

---
<div id='funcionalidades'/>

## ‚öôÔ∏è Funcionalidades

- Cadastro, login, atualiza√ß√£o e exclus√£o de usu√°rios
- Cadastro de produtores rurais da agricultura familiar
- Listar todos os produtores cadastrados
- Listar produtores por estado e/ou cidade
- Pesquisar um produtor espec√≠fico por Id
- Atualizar cadastro do produtor
- Deletar cadastro do produtor
- Cadastrar profissional volunt√°rio
- Listar todos os profissionais cadastrados
- Listar profissionais por cidade e/ou profiss√£o
- Pesquisar um profissional espec√≠fico por Id
- Atualizar cadastro do profissional
- Deletar cadastro do profissional
- Troca de mensagens entre produtor e profissional

---

<div id='tecnologias'/>

## üõ† Tecnologias Utilizadas

Na constru√ß√£o deste projeto foram utilizadas as seguintes tecnologias:

<p  align="justify">
<a  href="https://www.javascript.com/"><img  alt="Java Script"  src="https://img.shields.io/badge/JavaScript-pink">
<a  href="https://git-scm.com/"><img  alt="Git version"  src="https://img.shields.io/badge/Git/GitHub-pink">
<a  href="https://nodejs.org/pt-br/"><img  alt="Node version"  src="https://img.shields.io/badge/NodeJS-pink">
<a  href="https://www.mongodb.com/cloud/atlas"><img  alt="Node version"  src="https://img.shields.io/badge/MongoDB%20Atlas-pink">
<a  href="https://www.postman.com/"><img  alt="Postman"  src="https://img.shields.io/badge/Postman-pink">
<a  href="https://code.visualstudio.com/"><img  alt="VsCode"  src="https://img.shields.io/badge/VSCode-pink">
<a  href="https://dashboard.heroku.com/apps"><img  alt="Heroku"  src="https://img.shields.io/badge/Heroku-pink">
</a>

---
  
<div id='bibliotecas'/>
  
## üöÄ Bibliotecas Aplicadas
  
Foram aplicadas as seguintes bibliotecas neste projeto:
  
<p  align="justify">
<a  href="https://expressjs.com/pt-br/"><img  alt="Express version"  src="https://img.shields.io/badge/express-4.17.1-pink">
<a  href="https://www.npmjs.com/package/nodemon"><img  alt="Nodemon version"  src="https://img.shields.io/badge/nodemon-2.0.6-pink">
<a  href="https://www.npmjs.com/package/dotenv-safe"><img  alt="Dotenv-safe version"  src="https://img.shields.io/badge/dotenv-8.2.0-pink">
<a  href="https://mongoosejs.com/"><img  alt="Mongoose version"  src="https://img.shields.io/badge/mongoose-5.10.17-pink">
<a  href="https://www.npmjs.com/package/cors"><img  alt="npm version"  src="https://img.shields.io/badge/cors-2.8.5-pink">
<a  href="https://www.npmjs.com/"><img  alt="npm version"  src="https://img.shields.io/badge/npm-6.14.6-pink">
<a  href="https://www.npmjs.com/package/bcryptjs"><img  alt="Bcrypt version"  src="https://img.shields.io/badge/bcrypt-5.0.0-pink">
<a  href="https://www.npmjs.com/package/jsonwebtoken"><img  alt="Jsonwebtoken version"  src="https://img.shields.io/badge/jsonwebtoken-8.5.1-pink"></a>

 ---
  
<div id='arquitetura'/>
  
## üìÅ Arquitetura MVC

```
  
üìÅ voluntarios-do-campo
  |
  |- üìÅ src
  |   |
  |   |- üìÅ controller
  |         |- üìë farmerController.js
  |         |- üìë messageController.js
  |         |- üìë professionalController.js
  |         |- üìë userController.js
  |
  |   |- üìÅ database
  |         |- üìë mongoConfig.js
  |
  |   |- üìÅ helpers
  |         |- üìë hashPassword.js
  |
  |   |- üìÅ middlewares
  |         |- üìë auth.js
  |
  |   |- üìÅ  models
  |         |- üìë farmerSchema.js
  |         |- üìë messageSchema.js
  |         |- üìë professionalSchema.js
  |         |- üìë userSchema.js
  |
  |   |- üìÅ routes
  |         |- üìë farmerRoutes.js
  |         |- üìë indexRoutes.js
  |         |- üìë messageRoutes.js
  |         |- üìë professionalRoutes.js
  |         |- üìë userRoutes.js
  |
  |   |- üìë app.js
  |
  |
  |- üìë .env
  |- üìë .env.example
  |- üìë .gitignore
  |- üìë package-lock.json
  |- üìë package.json
  |- üìë procfile
  |- üìë README.md
  |- üìë server.js
  
  ```

 ---
  
<div id='instru√ß√µes'/>
  
## üìé Instru√ß√µes

Para a instala√ß√£o do projeto, siga o seguinte passo a passo:

Fa√ßa um fork do reposit√≥rio

>Fork atrav√©s do link [voluntarios do campo](https://github.com/amitairferreira/voluntarios-do-campo/fork).

No terminal, clone o fork do reposit√≥rio
  
>git clone https://github.com/user/voluntarios-do-campo.git
  
Crie uma branch para realizar suas contribui√ß√µes

>git checkout -b nome-da-sua-branch
 
Instale as depend√™ncias
  
>npm install

Na pasta raiz do projeto renomeie .env.example para .env e adicione as vari√°veis. Em seguida, execute o servidor no terminal
  
>npm run dev

O servidor iniciar√° e exibir√° a seguinte mensagem:
  
>Servidor rodando na porta: PORT
  
>Banco conectado (:

Ap√≥s suas contribui√ß√µes no projeto, realize o commit

>git commit -m 'sua mensagem'

Para subir o projeto no seu gitHub, execute o comando

>git push origin nome-da-sua-branch

Finalize criando um novo Pull Request com as contribui√ß√µes para o projeto original.

---
  
<div id='portas'/>
  
## ‚öôÔ∏è Portas

>Local: http://localhost:8080

>Heroku: https://voluntarios-do-campo.herokuapp.com/

> Utilize o [Postman](https://www.postman.com/) ou [Insomnia](https://insomnia.rest/download/) para testar os endpoints da API localmente.

---
  
<div id='rotas'/>
  
## üîÉ Rotas

| M√©todo HTTP  | Endpoint                     | Descri√ß√£o                            |
| ------------ | ---------------------------- | ------------------------------------ |
| GET          | `http://localhost:8080/`     |  Mensagem de apresenta√ß√£o            |

<br>
  
 ### Rotas dos usu√°rios: 
  
| M√©todo HTTP  | Endpoint                     | Descri√ß√£o                                   |
| ------------ | ---------------------------- | --------------------------------------------| 
| POST         | `user/create`                | Cadastra novo usu√°rio                       |
| GET          | `user/getUser/:id`           | Retorna informa√ß√µes do usu√°rio              |
| POST         | `user/login`                 | Realiza o login do usu√°rio                  |
| PATCH        | `user/update/:id`            | Atualiza email e/ou senha do usu√°rio        |
| DELETE       | `user/delete/:id`            | Exclui usu√°rio                              |

<br>
  
### Rotas para produtores:
  
| M√©todo HTTP  | Endpoint                     | Descri√ß√£o                                             |
| ------------ | ---------------------------- | ------------------------------------------------------|
| POST         | `farmer/create`              | Cadastra novo  produtor                               |
| GET          | `farmer/all`                 | Retorna todos os produtores cadastrados               |
| GET          | `farmer/byStateCity`         | Pesquisa produtor por estado e/ou por cidade          | 
| GET          | `farmer/byId/:id`            | Pesquisa um produtor espec√≠fico                       |
| PATCH        | `farmer/update/:id`          | Atualiza dados do produtor                            |
| DELETE       |  `farmer/delete/:id`         | Deleta cadastro do produtor                           |
  
<br>  

### Rotas para profissionais:
  
| M√©todo HTTP  | Endpoint                       | Descri√ß√£o                                           |
| ------------ | ----------------------------   | ----------------------------------------------------| 
| POST         | `professional/create`          | Cadastra novo profissional                          |
| GET          | `professional/all`             | Retorna todos os profissionais cadastrados          |
| GET          | `professional/byCityProfession`| Pesquisa profissional por cidade e/ou por profiss√£o | 
| GET          | `professional/byId/:id`        | Pesquisa um profissional espec√≠fico                 |
| PATCH        | `professional/update/:id`      | Atualiza dados do profissional                      |
| DELETE       |  `professional/delete/:id`     | Deleta cadastro do profissional                     |

<br>  
  
### Rotas para troca de mensagens:
  
| M√©todo HTTP  | Endpoint                               | Descri√ß√£o                                               |
| ------------ | ---------------------------------------|---------------------------------------------------------| 
| POST         | `message/send`                         | Envia mensagem                                          |
| GET          | `message/sendTo`                       | Retorna todas as mensagens enviadas pelo usu√°rio        |
| GET          | `message/received`                     | Retorna todas as mensagens recebidas pelo usu√°rio       | 
| PATCH        | `message/deleteMessageFarmer/:id`      | Oculta para o produtor a mensagem que deseja excluir    |
| PATCH        | `message/deleteMessageProfessional/:id`| Oculta para o profissional a mensagem que deseja excluir|

---

<div id='rotasp'/>

## üîê Rotas privadas

> Para ter acesso as rotas privadas √© necess√°rio primeiramente criar registro de usu√°rio (ou acesse com o seguinte usu√°rio de teste, email: `fl@gmail.com`, senha: `14051994`), depois realizar o login, copiar o token de autentica√ß√£o. Ir na aba de Authorization no Type escolher `Bearer Token` e no campo token colar o c√≥digo que foi copiado
  
| M√©todo HTTP  | Endpoint                       | Descri√ß√£o                                           |
| ------------ | ----------------------------   | ----------------------------------------------------|
| GET          | `user/getUser/:id`             | Retorna informa√ß√µes do usu√°rio                      |
| PATCH        | `user/update/:id`              | Atualiza email e/ou senha do usu√°rio                |
| DELETE       | `user/delete/:id`              | Exclui usu√°rio                                      |
| POST         | `message/send`                 | Troca de mensagens entre usu√°rios                   |
| GET          | `message/sendTo`               | Retorna todas as mensagens enviadas pelo usu√°rio    |
| GET          | `message/received`             | Retorna todas as mensagens recebidas pelo usu√°rio   |
| PATCH        | `farmer/update/:id`            | Atualiza dados cadastrais do produtor               |
| DELETE       | `farmer/delete/:id`            | Deleta cadastro do produtor                         |
| PATCH        | `professional/update/:id`      | Atualiza dados cadastrais do profissional           |
| DELETE       | `professional/delete/:id`      | Deleta cadastro do profissional                     |

---

<div id='dados'/>

## üìä Dados paras as collections

>Collection Produtores
- id: gerado automaticamente
- nome: texto e obrigat√≥rio
- estado: texto e obrigat√≥rio
- cidade: texto e obrigat√≥rio
- rua: texto e obrigat√≥rio
- n√∫mero: numera√ß√£o e obrigat√≥rio
- registro do cadastro ambiental rural: texto e obrigat√≥rio
- atividades desenvolvidas na propriedade: texto e obrigat√≥rio
- cultivo org√¢nico: booleano e obrigat√≥rio
- email: texto e obrigat√≥rio
- contato: texto e obrigat√≥rio
- termo de compromisso: booleano e obrigat√≥rio
<br>

>Collection Profissionais
- id: gerado automaticamente
- nome: texto e obrigat√≥rio
- profiss√£o: texto e obrigat√≥rio
- registro profissional: texto e obrigat√≥rio
- √°rea principal de atua√ß√£o: texto e obrigat√≥rio
- estao: texto e obrigat√≥rio
- cidade: texto e obrigat√≥rio
- email: texto e obrigat√≥rio
- contato: texto e obrigat√≥rio
- termo de compromisso: booleano e obrigat√≥rio
<br>
  
>Collection Mensagens
 - id: gerado automaticamente
 - id de quem envia: objectId e obrigat√≥rio
 - id de quem ir√° receber: objectId e obrigat√≥rio
 - tipo de usu√°rio: texto e obrigat√≥rio
 - nome de quem enviou: texto e obrigat√≥rio
 - nome de quem ir√° receber: texto e obrigat√≥rio
 - t√≠tulo: texto e obrigat√≥rio
 - menssagem: texto e obrigat√≥rio
<br>
  
>Collection Usu√°rios
- id: gerado automaticamente
- nome: texto e obrigat√≥rio
- tipo de usu√°rio: texto e obrigat√≥rio
- email: texto e obrigat√≥rio
- senha: texto e obrigat√≥rio

---

<div id='api'/>
  
## ‚úîÔ∏è API

>A API deve retornar o seguinte json para produtores:

```jsx
{
  "message": "Produtores cadastrados:",
  "farmerAll":
    {
      "_id": "62d738cdb77c62a4fe448f90",
      "name": "Francisco Ferreira Lima",
      "state": "Cear√°",
      "city": "Aratuba",
      "road": "Rua Segredo",
      "number": 706,
      "registryCar": "CE-168546dckndnfjd584fd",
      "cultivatedArea": "3,0 ha",
      "activities": "Produ√ß√£o de hortali√ßas",
      "organicCultivation": true,
      "email": "fl@gmail.com",
      "contact": "(85) 98108-2606",
      "termOfCompromise": true,
      "createdAt": "2022-07-19T23:05:49.127Z",
      "updatedAt": "2022-07-19T23:05:49.127Z",
      "__v": 0
    }
 }
  
```
<br>
  
>A API deve retornar o seguinte json para profissionais:
  
```jsx
  {
  "message": "Lista de Profissionais.",
  "professionalall":
    {
      "_id": "62d73a2db77c62a4fe448f9c",
      "name": "Amitair Ferreira ",
      "profession": "Agr√¥noma",
      "registryNumber": "995600",
      "mainArea": "Fruticultura ",
      "state": "Cear√°",
      "city": "Fortaleza",
      "email": "amitairagro@gmail.com",
      "contact": "(85) 981081010",
      "termOfCompromise": true,
      "createdAt": "2022-07-19T23:11:41.932Z",
      "updatedAt": "2022-07-19T23:11:41.932Z",
      "__v": 0
    }
}
  
 ```
 <br>
  
>A API deve retornar o seguinte json para usu√°rios:

```jsx
{
  "message": "Usu√°rio:",
  "user": {
    "_id": "62d84ece169ecd1183be12d2",
    "name": "Amitair Ferreira Lima",
    "typeUser": "Profissional",
    "email": "amitairferreira@gmail.com",
    "createdAt": "2022-07-20T18:51:59.276Z",
    "updatedAt": "2022-07-20T21:04:45.312Z",
    "__v": 0
  }
}

```
<br>
  
>A API deve retornar o seguinte json para mensagens recebidas e enviadas:

```jsx
 {
    "message": "Menssagens recebidas:",
    "receivedAllActive":
        {
            "_id": "62e2b230f33f669229b622ab",
            "sentById": "62d73932b77c62a4fe448f93",
            "sendToId": "62d73a2db77c62a4fe448f9c",
            "typeUser": "Farmer",
            "title": "Assist√™ncia t√©cnica",
            "text": "Oi. Boa tarde. Gostaria da sua ajuda para implementar fruticultura.",
            "hideToFarmer": false,
            "hideToProfessional": false,
            "sentByName": "Aloisio Pereira",
            "sendToName": "Amitair Ferreira ",
            "createdAt": "2022-07-28T15:58:41.036Z",
            "updatedAt": "2022-07-28T15:58:41.036Z",
            "__v": 0
        }
}

```  
  
```jsx
{    
    "message": "Mensagens enviadas:",
    "sendAllActive":
       {
            "_id": "62e2b35cf33f669229b622b0",
            "sentById": "62d73a2db77c62a4fe448f9c",
            "sendToId": "62d73932b77c62a4fe448f93",
            "typeUser": "Professional",
            "title": "Retorno",
            "text": "Boa tarde. Entrarei em contato para agendar sua visita.",
            "hideToFarmer": false,
            "hideToProfessional": false,
            "sentByName": "Amitair Ferreira ",
            "sendToName": "Aloisio Pereira",
            "createdAt": "2022-07-28T16:03:41.181Z",
            "updatedAt": "2022-07-28T16:03:41.181Z",
            "__v": 0
        }
 }
  
 ```


---
  
<div id='implementa√ß√µes'/>
  
## üöß Implementa√ß√µes Futuras

>Implementar teste unit√°rio ao c√≥digo do projeto

<br>

>Adicionar produtos e consumidores, permitindo que produtos oriundos da agricultura familiar seja comecializado na pr√≥pria plataforma

 <br>
  
>Implementar a op√ß√£o do produtor realizar feedback do profissional, de modo que os demais produtores tenham acesso

<br>
  
>Implementar interface front-end

<br>
  
> Adicionar perfil de usuario para incluir a√ß√µes admninstrativas (ex: listar todos os usuarios) 
  
---
  
<div id='agradecimentos'/>
  
 ## üíú Agradecimentos

<p align="justify">A frase que representa a {Reprograma} √© "Acreditem no processo". E eu, assim como tantas outras mulheres que a reprograma abra√ßou, acreditamos e como recompensa, constru√≠mos uma trajet√≥ria linda de muito aprendizado e parcerias. Aprender algo novo n√£o √© f√°cil, mas quando existe uma rede de apoio e acolhimento, o caminho fica bem mais leve. Minha gratid√£o √† todas as mulheres inc√≠veis que a reprograma colocou no meu caminho √© infinita. Meu maior desejo hoje, √© que iniciativas como a reprograma se multipliquem e alcancem muitas e muitas mulheres mundo a fora.

---
  
<div id='Autora'/>
  
## ‚òï Sobre a autora

<img style="border-radius: 20%;" src="https://user-images.githubusercontent.com/100969789/181139847-b838d5e1-9747-4768-a36e-000b575d6b1f.jpeg" width="100px;" alt=""/> </td><br>


**By Amitair Ferreira**.

<div>
<a href="https://www.linkedin.com/in/amitair-lima-b68537192/" target="_blank"><img src="https://img.shields.io/badge/-LinkedIn-%230077B5?style=for-the-badge&logo=linkedin&logoColor=white" target="_blank"></a>
<a href="https://instagram.com/amitairlima" target="_blank"><img src="https://img.shields.io/badge/-Instagram-%23E4405F?style=for-the-badge&logo=instagram&logoColor=white" target="_blank"></a>
<a href ="https://app.slack.com/client/T1A3A7ADC/C038MPK2MHA/user_profile" target="_blank"><img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white" target="_blank"></a> 
</div>

#### [In√≠cio](#sum√°rio) 
