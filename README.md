
<br>

<div align="center">
<img src="https://user-images.githubusercontent.com/100969789/180617783-179be0e9-db51-450e-9aeb-e667bb9e9c0a.png" width="350px" />
</div>


> Iniciativa que visa conectar produtores da agricultura familiar e profissionais voluntÃ¡rios.



<p align="justify">
  <a>
     <img src="http://img.shields.io/static/v1?label=status&message=Em%20Desenvolvimento&color=pink&style?style=flat"/>
     <img src="https://img.shields.io/github/last-commit/amitairferreira/voluntarios-do-campo?color=pink"/>
     <img src="https://img.shields.io/badge/version-1.0.0-pink"/>
  </a>
</p>


## **SumÃ¡rio**

* [Desafio](#desafio)
* [Proposta](#proposta)
* [Link ApresentaÃ§Ã£o](#link)
* [Funcionalidades](#funcionalidades)
* [Tecnologias Utilizadas](#tecnologias)
* [Bibliotecas Aplicadas](#bibliotecas)
* [Arquitetura MVC](#arquitetura)
* [InstruÃ§Ãµes](#instruÃ§Ãµes)
* [Portas](#portas)
* [Rotas](#rotas)
* [Rotas Privadas](#rotasp)
* [Dados para as collections](#dados)
* [API](#api)

---

<div id='desafio'/>

## ğŸ’» Desafio

<p align="justify">Segundo dados do MAPA(ministÃ©rio da agricultura pecuÃ¡ria e abastecimento) a agricultura Familiar Ã© a principal responsÃ¡vel pela produÃ§Ã£o dos alimentos que sÃ£o disponibilizados para o consumo da populaÃ§Ã£o brasileira. Toda essa produÃ§Ã£o Ã© oriunda de pequenos sistemas agrÃ­colas constituÃ­dos de produtores rurais, comunidades tradicionais, assentados da reforma agrÃ¡ria, silvicultores e aquicultores.
<p align="justify">O censo AgrÃ­cola do IBGE indica que a agricultura familiar Ã© a base econÃ´mica de 90% dos municÃ­pios brasileiros com atÃ© 20 mil habitantes, com uma produÃ§Ã£o diversificada de grÃ£os, proteÃ­nas animal e vegetal, frutas, verduras e legumes. 
<p align="justify">Embora evidente a importÃ¢ncia da agricultura familiar para o pais, a falta de assistÃªncia tÃ©cnica se mostra como agente contraditÃ³rio para o desenvolvimento no campo, visto que o acompanhamento profissional paralelo a experiÃªncia cotidiana do produtor tornaria possÃ­vel a criaÃ§Ã£o de sistema agrÃ­colas sustentÃ¡veis e lucrativos.
<p align="justify">Contudo, os orgÃ£os pÃºblicos responsÃ¡veis por oferecer assistÃªncia tÃ©cnica agrÃ­cola nÃ£o atende de forma eficaz a essa populaÃ§Ã£o e a pricipal justificativa apontada Ã© o reduzido tamanho do corpo tÃ©cnico dessas instituiÃ§Ãµes, o que impossibilita orientaÃ§Ã£o individualizada aos agricultores.
<br>

---
  
<div id='proposta'/>

## ğŸ’¡ Proposta  

<p align="justify">O projeto Ã© uma API que permite a listagem de pequenos produtores da agricultura familiar, bem como listagem de profissionais da agropecuÃ¡ria como agrÃ´nomos, zootecnistas, veterinÃ¡rios e tÃ©cnicos agrÃ­colas. O cadastro Ã© realizado de forma clara e intuitiva, permitindo que pessoas de qualquer grau de escolaridade tenha acesso de forma simples.
<p align="justify">Ao realizar o cadastro, o produtor e profissional informam dados como endereÃ§o, principais atividades desenvolvidas e Ã¡reas de atuaÃ§Ã£o. O produtor poderÃ¡ pesquisar o tÃ©cnico por profissÃ£o e cidade, serÃ¡ possÃ­vel ainda, troca de mensagens entre ambos, possibilitando contato direto e dessa forma reduzindo a distÃ¢ncia entre agricultura familiar e todo o acompanhamento tÃ©cnico nescessÃ¡rio.

---

<div id='link'/>

## ğŸ“ Link ApresentaÃ§Ã£o

- [ApresentaÃ§Ã£o]()

---
<div id='funcionalidades'/>

## âš™ï¸ Funcionalidades

- Cadastro, login, atualizaÃ§Ã£o e exclusÃ£o de usuÃ¡rios
- Cadastro de produtores rurais da agricultura familiar
- Listar todos os produtores cadastrados
- Listar produtores por estado e/ou cidade
- Pesquisar um produtor especÃ­fico por Id
- Atualizar cadastro do produtor
- Deletar cadastro do produtor
- Cadastrar profissional voluntÃ¡rio
- Listar todos os profissionais cadastrados
- Listar profissionais por cidade e/ou profissÃ£o
- Pesquisar um profissional especÃ­fico por Id
- Atualizar cadastro do profissional
- Deletar cadastro do profissional
- Troca de mensagens entre produtor e profissional

---

<div id='tecnologias'/>

## ğŸ›  Tecnologias Utilizadas

Na construÃ§Ã£o deste projeto foram utilizadas as seguintes tecnologias:

<p  align="justify">
<a  href="https://www.javascript.com/"><img  alt="Java Script"  src="https://img.shields.io/badge/JavaScript-pink">
<a  href="https://git-scm.com/"><img  alt="Git version"  src="https://img.shields.io/badge/Git/GitHub-pink">
<a  href="https://nodejs.org/pt-br/"><img  alt="Node version"  src="https://img.shields.io/badge/NodeJS-pink">
<a  href="https://www.mongodb.com/cloud/atlas"><img  alt="Node version"  src="https://img.shields.io/badge/MongoDB%20Atlas-pink">
<a  href="https://www.postman.com/"><img  alt="Postman"  src="https://img.shields.io/badge/Postman-pink">
<a  href="https://code.visualstudio.com/"><img  alt="VsCode"  src="https://img.shields.io/badge/VSCode-pink">
<a  href="https://dashboard.heroku.com/apps"><img  alt="Heroku"  src="https://img.shields.io/badge/Heroku-pink">
</a>

---
  
<div id='bibliotecas'/>
  
## ğŸš€ Bibliotecas Aplicadas
  
Foram aplicadas as seguintes bibliotecas neste projeto:
  
<p  align="justify">
<a  href="https://expressjs.com/pt-br/"><img  alt="Express version"  src="https://img.shields.io/badge/express-4.17.1-pink">
<a  href="https://www.npmjs.com/package/nodemon"><img  alt="Nodemon version"  src="https://img.shields.io/badge/nodemon-2.0.6-pink">
<a  href="https://www.npmjs.com/package/dotenv-safe"><img  alt="Dotenv-safe version"  src="https://img.shields.io/badge/dotenv-8.2.0-pink">
<a  href="https://mongoosejs.com/"><img  alt="Mongoose version"  src="https://img.shields.io/badge/mongoose-5.10.17-pink">
<a  href="https://www.npmjs.com/package/cors"><img  alt="npm version"  src="https://img.shields.io/badge/cors-2.8.5-pink">
<a  href="https://www.npmjs.com/"><img  alt="npm version"  src="https://img.shields.io/badge/npm-6.14.6-pink">
<a  href="https://www.npmjs.com/package/bcryptjs"><img  alt="Bcrypt version"  src="https://img.shields.io/badge/bcrypt-5.0.0-pink">
<a  href="https://www.npmjs.com/package/jsonwebtoken"><img  alt="Jsonwebtoken version"  src="https://img.shields.io/badge/jsonwebtoken-8.5.1-pink"></a>

 ---
  
<div id='arquitetura'/>
  
## ğŸ“ Arquitetura MVC

```
  
ğŸ“ voluntarios-do-campo
  |
  |- ğŸ“ src
  |   |
  |   |- ğŸ“ controller
  |         |- ğŸ“‘ farmerController.js
  |         |- ğŸ“‘ messageController.js
  |         |- ğŸ“‘ professionalController.js
  |         |- ğŸ“‘ userController.js
  |
  |   |- ğŸ“ database
  |         |- ğŸ“‘ mongoConfig.js
  |
  |   |- ğŸ“ helpers
  |         |- ğŸ“‘ hashPassword.js
  |
  |   |- ğŸ“ middlewares
  |         |- ğŸ“‘ auth.js
  |
  |   |- ğŸ“  models
  |         |- ğŸ“‘ farmerSchema.js
  |         |- ğŸ“‘ messageSchema.js
  |         |- ğŸ“‘ professionalSchema.js
  |         |- ğŸ“‘ userSchema.js
  |
  |   |- ğŸ“ routes
  |         |- ğŸ“‘ farmerRoutes.js
  |         |- ğŸ“‘ indexRoutes.js
  |         |- ğŸ“‘ messageRoutes.js
  |         |- ğŸ“‘ professionalRoutes.js
  |         |- ğŸ“‘ userRoutes.js
  |
  |   |- ğŸ“‘ app.js
  |
  |
  |- ğŸ“‘ .env
  |- ğŸ“‘ .env.example
  |- ğŸ“‘ .gitignore
  |- ğŸ“‘ package-lock.json
  |- ğŸ“‘ package.json
  |- ğŸ“‘ procfile
  |- ğŸ“‘ README.md
  |- ğŸ“‘ server.js
  
  ```

 ---
  
<div id='instruÃ§Ãµes'/>
  
## ğŸ“ InstruÃ§Ãµes

Para a instalaÃ§Ã£o do projeto, siga o seguinte passo a passo:
  
No terminal, clone o repositÃ³rio
  
>git clone https://github.com/amitairferreira/voluntarios-do-campo.git
  
Entre na pasta do projeto
  
>cd voluntarios-do-campo

Instale as dependÃªncias
  
>npm install

Na pasta raiz do projeto renomeie .env.example para .env e adicione as variÃ¡veis. Em seguida, execute o servidor no terminal
  
>npm run dev

O servidor iniciarÃ¡ e exibirÃ¡ a seguinte mensagem:
  
>Servidor rodando na porta: PORT
  
>Banco conectado (:

---
  
<div id='portas'/>
  
## âš™ï¸ Portas

>Local: http://localhost:8080

>Heroku: https://voluntarios-do-campo.herokuapp.com/

> Utilize o [Postman](https://www.postman.com/) ou [Insomnia](https://insomnia.rest/download/) para testar os endpoints da API localmente.

---
  
<div id='rotas'/>
  
## ğŸ”ƒ Rotas

| MÃ©todo HTTP  | Endpoint                     | DescriÃ§Ã£o                            |
| ------------ | ---------------------------- | ------------------------------------ |
| GET          | `http://localhost:8080/`     |  Mensagem de apresentaÃ§Ã£o            |

<br>
  
 ### Rotas dos usuÃ¡rios: 
  
| MÃ©todo HTTP  | Endpoint                     | DescriÃ§Ã£o                                   |
| ------------ | ---------------------------- | --------------------------------------------| 
| POST         | `user/create`                | Cadastra novo usuÃ¡rio                       |
| GET          | `user/all`                   | Retorna todos os usuÃ¡rios cadastrados       |
| POST         | `user/login`                 | Realiza o login do usuÃ¡rio                  |
| PATCH        | `user/update/:id`            | Atualiza email e/ou senha do usuÃ¡rio        |
| DELETE       | `user/delete/:id`            | Exclui usuÃ¡rio                              |

<br>
  
### Rotas para produtores:
  
| MÃ©todo HTTP  | Endpoint                     | DescriÃ§Ã£o                                             |
| ------------ | ---------------------------- | ------------------------------------------------------|
| POST         | `farmer/create`              | Cadastra novo  produtor                               |
| GET          | `farmer/all`                 | Retorna todos os produtores cadastrados               |
| GET          | `farmer/byStateCity`         | Pesquisa produtor por estado e/ou por cidade          | 
| GET          | `farmer/byId/:id`            | Pesquisa um produtor especÃ­fico                       |
| PATCH        | `farmer/update/:id`          | Atualiza dados do produtor                            |
| DELETE       |  `farmer/delete/:id`         | Deleta cadastro do produtor                           |
  
<br>  

### Rotas para profissionais:
  
| MÃ©todo HTTP  | Endpoint                       | DescriÃ§Ã£o                                           |
| ------------ | ----------------------------   | ----------------------------------------------------| 
| POST         | `professional/create`          | Cadastra novo profissional                          |
| GET          | `professional/all`             | Retorna todos os profissionais cadastrados          |
| GET          | `professional/byCityProfession`| Pesquisa profissional por cidade e/ou por profissÃ£o | 
| GET          | `professional/byId/:id`        | Pesquisa um profissional especÃ­fico                 |
| PATCH        | `professional/update/:id`      | Atualiza dados do profissional                      |
| DELETE       |  `professional/delete/:id`     | Deleta cadastro do profissional                     |

<br>  
  
### Rotas para troca de mensagens:
  
| MÃ©todo HTTP  | Endpoint                       | DescriÃ§Ã£o                                           |
| ------------ | ----------------------------   | ----------------------------------------------------| 
| POST         | `message/send`                 | Envia mensagem                                      |
| GET          | `message/sendTo`               | Retorna todas as mensagens enviadas pelo usuÃ¡rio    |
| GET          | `message/received`             | Retorna todas as mensagens recebidas pelo usuÃ¡rio   | 

---

<div id='rotasp'/>

## ğŸ” Rotas privadas

> Para ter acesso as rotas privadas Ã© necessÃ¡rio primeiramente criar registro de usuÃ¡rio, depois realizar o login, copiar o token de autenticaÃ§Ã£o. Ir na aba de Authorization no Type escolher `Bearer Token` e no campo token colar o cÃ³digo que foi copiado
  
| MÃ©todo HTTP  | Endpoint                       | DescriÃ§Ã£o                                           |
| ------------ | ----------------------------   | ----------------------------------------------------| 
| PATCH        | `user/update/:id`              | Atualiza email e/ou senha do usuÃ¡rio                |
| DELETE       | `user/delete/:id`              | Exclui usuÃ¡rio                                      |
| POST         | `message/send`                 | Troca de mensagens entre usuÃ¡rios                   |
| GET          | `message/sendTo`               | Retorna todas as mensagens enviadas pelo usuÃ¡rio    |
| GET          | `message/received`             | Retorna todas as mensagens recebidas pelo usuÃ¡rio   |
| PATCH        | `farmer/update/:id`            | Atualiza dados cadastrais do produtor               |
| DELETE       | `farmer/delete/:id`            | Deleta cadastro do produtor                         |
| PATCH        | `professional/update/:id`      | Atualiza dados cadastrais do profissional           |
| DELETE       | `professional/delete/:id`      | Deleta cadastro do profissional                     |

---

<div id='dados'/>

## ğŸ“Š Dados paras as collections

>Collection Produtores
- id: gerado automaticamente
- nome: texto e obrigatÃ³rio
- estado: texto e obrigatÃ³rio
- cidade: texto e obrigatÃ³rio
- rua: texto e obrigatÃ³rio
- nÃºmero: numeraÃ§Ã£o e obrigatÃ³rio
- registro do cadastro ambiental rural: texto e obrigatÃ³rio
- atividades desenvolvidas na propriedade: texto e obrigatÃ³rio
- cultivo orgÃ¢nico: booleano e obrigatÃ³rio
- email: texto e obrigatÃ³rio
- contato: texto e obrigatÃ³rio
- termo de compromisso: booleano e obrigatÃ³rio
<br>

>Collection Profissionais
- id: gerado automaticamente
- nome: texto e obrigatÃ³rio
- profissÃ£o: texto e obrigatÃ³rio
- registro profissional: texto e obrigatÃ³rio
- Ã¡rea principal de atuaÃ§Ã£o: texto e obrigatÃ³rio
- estao: texto e obrigatÃ³rio
- cidade: texto e obrigatÃ³rio
- email: texto e obrigatÃ³rio
- contato: texto e obrigatÃ³rio
- termo de compromisso: booleano e obrigatÃ³rio
<br>
  
>Collection Mensagens
 - id: gerado automaticamente
 - id de quem envia: objectId e obrigatÃ³rio
 - id de quem irÃ¡ receber: objectId e obrigatÃ³rio
 - tipo de usuÃ¡rio: texto e obrigatÃ³rio
 - nome de quem enviou: texto e obrigatÃ³rio
 - nome de quem irÃ¡ receber: texto e obrigatÃ³rio
 - tÃ­tulo: texto e obrigatÃ³rio
 - menssagem: texto e obrigatÃ³rio
<br>
  
>Collection UsuÃ¡rios
- id: gerado automaticamente
- nome: texto e obrigatÃ³rio
- tipo de usuÃ¡rio: texto e obrigatÃ³rio
- email: texto e obrigatÃ³rio
- senha: texto e obrigatÃ³rio

---

<div id='api'/>
  
## âœ”ï¸ API

>A API deve retornar o seguinte json para produtores:

```jsx
{
  "message": "Produtores cadastrados:",
  "farmerAll":
    {
      "_id": "62d738cdb77c62a4fe448f90",
      "name": "Francisco Ferreira Lima",
      "state": "CearÃ¡",
      "city": "Aratuba",
      "road": "Rua Segredo",
      "number": 706,
      "registryCar": "CE-168546dckndnfjd584fd",
      "cultivatedArea": "3,0 ha",
      "activities": "ProduÃ§Ã£o de hortaliÃ§as",
      "organicCultivation": true,
      "email": "fl@gmail.com",
      "contact": "(85) 98108-2606",
      "termOfCompromise": true,
      "createdAt": "2022-07-19T23:05:49.127Z",
      "updatedAt": "2022-07-19T23:05:49.127Z",
      "__v": 0
    }
```
<br>
  
>A API deve retornar o seguinte json para profissionais:
  
```jsx
  {
  "message": "Lista de Profissionais.",
  "professionalall":
    {
      "_id": "62d73a2db77c62a4fe448f9c",
      "name": "Amitair Ferreira ",
      "profession": "AgrÃ´noma",
      "registryNumber": "995600",
      "mainArea": "Fruticultura ",
      "state": "CearÃ¡",
      "city": "Fortaleza",
      "email": "amitairagro@gmail.com",
      "contact": "(85) 981081010",
      "termOfCompromise": true,
      "createdAt": "2022-07-19T23:11:41.932Z",
      "updatedAt": "2022-07-19T23:11:41.932Z",
      "__v": 0
    }
